#!/bin/bash

function check(){
   local OPTIND opt i
   while getopts "c:i:" opt; do
     case $opt in
       c) echo "$computerworkingon";computerworkingon="$OPTARG";;
       i) computerworkingip="$OPTARG";;
      \?) exit 1 ;;
     esac
   done
   shift $((OPTIND -1))
}


function main(){
check $@
# read -p "Please confirm: $computerworkingon with IP address of $computerworkingip " confirm && [[ $confirm == [yY] || $confirm == [yY][eE][sS] ]] || exit 1
mkdir /home/nate/HTB/"$computerworkingon"
touch /home/nate/HTB/"$computerworkingon"/"$computerworkingon"-ip
echo "$computerworkingip" | sudo tee /home/nate/HTB/"$computerworkingon"/"$computerworkingon"-ip
touch /home/nate/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
echo "sudo nmap -sT -iL $computerworkingon-ip -oA $computerworkingon-sT" | sudo tee -a /home/nate/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
echo "sudo nmap -sU --top-ports 100 -iL $computerworkingon-ip -oA $computerworkingon-sU" | sudo tee -a /home/nate/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
echo "sudo nmap -sV -O -iL $computerworkingon-ip -oA $computerworkingon-sVO" | sudo tee -a /home/nate/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
echo "sudo nmap -A -iL $computerworkingon-ip -oA $computerworkingon-A" | sudo tee -a /home/nate/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
echo "sudo nmap --script=default -iL $computerworkingon-ip -oA $computerworkingon-default" | sudo tee -a /home/nate/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
echo "sudo nmap --script=vuln -iL $computerworkingon-ip -oA $computerworkingon-vuln" | sudo tee -a /home/nate/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
echo "sudo nmap --script=auth -iL $computerworkingon-ip -oA $computerworkingon-auth" | sudo tee -a /home/nate/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
echo "You script and folders is ready. You will find it in /home/nate/HTB/$computerworkingon For security, please chmod the file before attempting to run."
}

#function check(){
#   local OPTIND opt i
#   while getopts ":ci:" opt; do
#     case $opt in
#       c) echo "$computerworkingon";computerworkingon="$OPTARG";;
#       i) computerworkingip="$OPTARG";;
#      \?) exit 1 ;;
#     esac
#   done
#   shift $((OPTIND -1))
# }

main $@

# read -p "Please confirm: $computerworkingon with IP address of $computerworkingip " confirm && [[ $confirm == [yY] || $confirm == [yY][eE][sS] ]] || exit 1
# sudo mkdir ~/HTB/"$computerworkingon"
# sudo touch ~/HTB/"$computerworkingon"/"$computerworkingon"-ip
# echo "$computerworkingip" | sudo tee ~/HTB/"$computerworkingon"/"$computerworkingon"-ip
# sudo touch ~/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
# echo "sudo nmap -sT -iL $computerworkingon-ip -oA $computerworkingon-sT" | sudo tee -a ~/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
# echo "sudo nmap -sU --top-ports 100 -iL $computerworkingon-ip -oA $computerworkingon-sU" | sudo tee -a ~/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
# echo "sudo nmap -sV -O -iL $computerworkingon-ip -oA $computerworkingon-sVO" | sudo tee -a ~/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
# echo "sudo nmap -A -iL $computerworkingon-ip -oA $computerworkingon-A" | sudo tee -a ~/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
# echo "sudo nmap --script=default -iL $computerworkingon-ip -oA $computerworkingon-default" | sudo tee -a ~/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
# echo "sudo nmap --script=vuln -iL $computerworkingon-ip -oA $computerworkingon-vuln" | sudo tee -a ~/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
# echo "sudo nmap --script=auth -iL $computerworkingon-ip -oA $computerworkingon-auth" | sudo tee -a ~/HTB/"$computerworkingon"/"$computerworkingon"nmapMaster.sh
# echo "You script and folders is ready. You will find it in ~/HTB/$computerworkingon For security, please chmod the file before attempting to run."
